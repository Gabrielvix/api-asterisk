function a3_0x59bc(){const _0x26e48e=['@PICKUPMARK)','__esModule','Originate','1fNmZfw','4845033IPndOg','Erro\x20ao\x20fazer\x20chamada:','UNIQUEID:','Pickup(','message','undefined','Local/','115626ULCeJg','asterisk\x20-rx\x20\x27','stderr','beforePoint','map','includes','reduce','460316qKENaq','ramal','4QYGBPJ','ramal_origin','(((.+)+)+)+$','destination','1717696WRTnEw','customAmiClient','1532076bjQNQq','Chamou\x20Rota\x20ClickToCall','1123465QocKJq','1128850NwICLJ','error','lastFourDigits','length','log','push','forEach','caller','Channel\x20not\x20found','answer','stdout','from-internal','uniqueID','catch','exec','split','search','Reiniciando\x20a\x20API...','SIPADDHEADER=\x22Call-Info:\x20<sip:','>;answer-after=0\x22','clickToCall','exit','toString','connect','@from-internal','core\x20show\x20channels\x20concise','then','UNIQUEID\x20Inexistente.','action','defineProperty'];a3_0x59bc=function(){return _0x26e48e;};return a3_0x59bc();}const a3_0xf04139=a3_0x378f;(function(_0x26a385,_0x332d91){const _0x57adcf=a3_0x378f,_0x1ffd54=_0x26a385();while(!![]){try{const _0x323d9c=-parseInt(_0x57adcf(0xa9))/0x1*(parseInt(_0x57adcf(0x7d))/0x2)+-parseInt(_0x57adcf(0xb1))/0x3*(parseInt(_0x57adcf(0x7f))/0x4)+parseInt(_0x57adcf(0x88))/0x5+-parseInt(_0x57adcf(0x85))/0x6+parseInt(_0x57adcf(0x87))/0x7+-parseInt(_0x57adcf(0x83))/0x8+parseInt(_0x57adcf(0xaa))/0x9;if(_0x323d9c===_0x332d91)break;else _0x1ffd54['push'](_0x1ffd54['shift']());}catch(_0x3a6a85){_0x1ffd54['push'](_0x1ffd54['shift']());}}}(a3_0x59bc,0x2d5f4));const a3_0x26ff22=(function(){let _0x25d8c9=!![];return function(_0xd37d7d,_0x1adab4){const _0x510722=_0x25d8c9?function(){if(_0x1adab4){const _0x2ad2a2=_0x1adab4['apply'](_0xd37d7d,arguments);return _0x1adab4=null,_0x2ad2a2;}}:function(){};return _0x25d8c9=![],_0x510722;};}()),a3_0x3f9b2d=a3_0x26ff22(this,function(){const _0x548c94=a3_0x378f;return a3_0x3f9b2d[_0x548c94(0x9e)]()[_0x548c94(0x98)]('(((.+)+)+)+$')[_0x548c94(0x9e)]()['constructor'](a3_0x3f9b2d)['search'](_0x548c94(0x81));});a3_0x3f9b2d();'use strict';Object[a3_0xf04139(0xa5)](exports,a3_0xf04139(0xa7),{'value':!0x0}),exports[a3_0xf04139(0x91)]=answer,exports[a3_0xf04139(0x9c)]=clickToCall,exports['transfer']=transfer;var _ami=require('./ami'),exec=require('child-process-promise')[a3_0xf04139(0x96)];async function command(_0x5a8514){return new Promise((_0x42074e,_0xfc96e5)=>{const _0x55e21d=a3_0x378f;exec(_0x55e21d(0xb2)+_0x5a8514+'\x27')[_0x55e21d(0xa2)](function(_0x4d1c2a){const _0x4246c4=_0x55e21d;var _0x2763e0=_0x4d1c2a[_0x4246c4(0x92)],_0x7ed8e1=_0x4d1c2a[_0x4246c4(0xb3)];return _0x7ed8e1?_0xfc96e5(_0x7ed8e1):_0x42074e(_0x2763e0);})['catch'](function(_0x362259){const _0x6b859d=_0x55e21d;console[_0x6b859d(0x89)]('ERROR:\x20',_0x362259);});});}function timeDelay(){return new Promise(_0x286d23=>{setTimeout(()=>{_0x286d23();},0x578);});}function getMaxFullNumberMinusOne(_0xbcca0){const _0x50fad3=a3_0xf04139,_0x2cbd61=_0xbcca0[_0x50fad3(0xb5)](_0x35e518=>{const [_0x417b2e,_0x28d395]=_0x35e518['split']('.'),_0xff5498=parseInt(_0x28d395);return{'beforePoint':_0x417b2e,'lastFourDigits':_0xff5498};}),_0x100b42=_0x2cbd61[_0x50fad3(0x7c)]((_0x2b34a4,_0xf78a05)=>_0xf78a05['lastFourDigits']>_0x2b34a4['lastFourDigits']?_0xf78a05:_0x2b34a4),_0xbf37b4=_0x100b42[_0x50fad3(0x8a)]-0x1;return _0x100b42[_0x50fad3(0xb4)]+'.'+_0xbf37b4['toString']();}async function clickToCall(_0x976d89,_0x3c4fca){const _0x70d67d=a3_0xf04139;try{return console[_0x70d67d(0x8c)](_0x70d67d(0x86),_0x976d89),await _ami[_0x70d67d(0x84)][_0x70d67d(0xa4)]({'Action':_0x70d67d(0xa8),'Exten':''+_0x976d89[_0x70d67d(0x82)],'Priority':'1','Variable':_0x70d67d(0x9a)+_0x3c4fca+_0x70d67d(0x9b),'Channel':_0x70d67d(0xb0)+_0x976d89[_0x70d67d(0x7e)],'CallerID':_0x976d89['destination'],'Context':_0x70d67d(0x93)},!0x0,0x7530)['then'](async _0x2a3eea=>{const _0x44852b=_0x70d67d;let _0x25b8b8=await command('core\x20show\x20channels\x20concise'),_0x17ec8c=[];return _0x25b8b8=_0x25b8b8[_0x44852b(0x97)]('\x0a'),_0x25b8b8[_0x44852b(0x8e)](_0xc73114=>{const _0x5b3a08=_0x44852b;if(_0xc73114['split']('!')[0x0][_0x5b3a08(0xb6)](_0x976d89['ramal'])||_0xc73114[_0x5b3a08(0x97)]('!')[0x0]['includes'](_0x976d89[_0x5b3a08(0x82)])){console[_0x5b3a08(0x8c)](_0xc73114);const _0x3d92bb=_0xc73114[_0x5b3a08(0x97)]('!'),_0x26195e=_0x3d92bb[_0x3d92bb['length']-0x1];_0x17ec8c[_0x5b3a08(0x8d)](_0x26195e);}}),0x0<_0x17ec8c[_0x44852b(0x8b)]?(_0x2a3eea['uniqueID']=getMaxFullNumberMinusOne(_0x17ec8c),console[_0x44852b(0x8c)](_0x44852b(0xac),_0x2a3eea[_0x44852b(0x94)])):(_0x2a3eea['uniqueID']=null,console[_0x44852b(0x8c)](_0x44852b(0xa3))),console[_0x44852b(0x8c)](_0x2a3eea),_0x2a3eea;})[_0x70d67d(0x95)](_0x31aa5c=>{console['log'](_0x31aa5c);});}catch(_0x49ce46){return console[_0x70d67d(0x89)](_0x70d67d(0xab),_0x49ce46),_0x49ce46 instanceof Error&&_0x49ce46?.[_0x70d67d(0xae)]?.[_0x70d67d(0xb6)](_0x70d67d(0x9f))&&(console['error'](_0x70d67d(0x99)),process[_0x70d67d(0x9d)](0x1)),{'error':_0x49ce46[_0x70d67d(0xae)]};}}function a3_0x378f(_0x7c90b7,_0x2ba056){const _0x4d2f85=a3_0x59bc();return a3_0x378f=function(_0x3f9b2d,_0x26ff22){_0x3f9b2d=_0x3f9b2d-0x7c;let _0x59bc0b=_0x4d2f85[_0x3f9b2d];return _0x59bc0b;},a3_0x378f(_0x7c90b7,_0x2ba056);}async function transfer(_0x226ca1){return new Promise(async(_0x57b443,_0x5aab4d)=>{const _0x333d66=a3_0x378f;let _0x4a5fc6='',_0x36d680=await command(_0x333d66(0xa1));_0x36d680=_0x36d680[_0x333d66(0x97)]('\x0a'),_0x36d680[_0x333d66(0x8e)](_0x104405=>{const _0x536c08=_0x333d66;if(_0x104405[_0x536c08(0x97)]('!')[0x0][_0x536c08(0xb6)](_0x226ca1[_0x536c08(0x80)]))return void(_0x4a5fc6=_0x104405['split']('!')[0x0]);}),''==_0x4a5fc6?_0x5aab4d(_0x333d66(0x90)):_0x57b443(amiClient[_0x333d66(0xa4)]({'Action':'Atxfer','Exten':_0x226ca1['ramal_destination'],'Priority':'1','Channel':_0x4a5fc6,'Context':_0x333d66(0x93)}));});}async function answer(_0x4c48fc){return new Promise(async(_0x82c4f2,_0x33332e)=>{const _0x13772f=a3_0x378f;_0x13772f(0xaf)==_0x4c48fc[_0x13772f(0x80)]||''==_0x4c48fc[_0x13772f(0x80)]||''==_0x4c48fc[_0x13772f(0x8f)]?_0x33332e('Parametros\x20InvÃ¡lidos'):_0x82c4f2(amiClient[_0x13772f(0xa4)]({'Action':_0x13772f(0xa8),'Channel':_0x13772f(0xb0)+_0x4c48fc['ramal_origin']+_0x13772f(0xa0),'Application':'Exec','CallerID':_0x4c48fc[_0x13772f(0x8f)],'Variable':_0x13772f(0x9a)+ipAddress+'>;answer-after=0','Data':_0x13772f(0xad)+_0x4c48fc[_0x13772f(0x80)]+'&'+_0x4c48fc['ramal_origin']+_0x13772f(0xa6)},!0x0));});}