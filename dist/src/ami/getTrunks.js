const a21_0x37d0b7=a21_0x2df2;(function(_0xfb8527,_0x231a59){const _0x252354=a21_0x2df2,_0x1b637c=_0xfb8527();while(!![]){try{const _0x32d69c=-parseInt(_0x252354(0x1d2))/0x1+parseInt(_0x252354(0x1ce))/0x2*(-parseInt(_0x252354(0x1e9))/0x3)+-parseInt(_0x252354(0x1d6))/0x4+-parseInt(_0x252354(0x1d4))/0x5+parseInt(_0x252354(0x1e0))/0x6+-parseInt(_0x252354(0x1cf))/0x7+-parseInt(_0x252354(0x1cd))/0x8*(-parseInt(_0x252354(0x1de))/0x9);if(_0x32d69c===_0x231a59)break;else _0x1b637c['push'](_0x1b637c['shift']());}catch(_0x6c325e){_0x1b637c['push'](_0x1b637c['shift']());}}}(a21_0x4f35,0xa78f6));const a21_0x4555eb=(function(){let _0x31b9d2=!![];return function(_0x35693e,_0x5492b3){const _0x472b51=_0x31b9d2?function(){const _0x3d856a=a21_0x2df2;if(_0x5492b3){const _0xb65c16=_0x5492b3[_0x3d856a(0x1d8)](_0x35693e,arguments);return _0x5492b3=null,_0xb65c16;}}:function(){};return _0x31b9d2=![],_0x472b51;};}()),a21_0x2576bb=a21_0x4555eb(this,function(){const _0x5b7a41=a21_0x2df2;return a21_0x2576bb[_0x5b7a41(0x1d1)]()['search'](_0x5b7a41(0x1dd))[_0x5b7a41(0x1d1)]()[_0x5b7a41(0x1cb)](a21_0x2576bb)['search'](_0x5b7a41(0x1dd));});a21_0x2576bb();'use strict';function a21_0x4f35(){const _0x52604e=['5166DpkjYK','split','5796210TVgcHs','mysqlrootpwd','log','trim','end','asterisk','exports','execute','SELECT\x20id,\x20keyword,\x20data\x20FROM\x20sip\x20WHERE\x20keyword\x20=\x20\x22callerid\x22','3204039XPjLPO','utf-8','constructor','localhost','61928eHWJgA','2Txhemh','7601559MoEUxD','root','toString','740639hLCasR','createConnection','3719080BRhYOG','Erro\x20ao\x20ler\x20o\x20arquivo\x20de\x20configuração:','4338552Fmshnu','Não\x20foi\x20possível\x20obter\x20a\x20senha\x20do\x20banco\x20de\x20dados.','apply','Erro\x20ao\x20conectar\x20ao\x20banco\x20de\x20dados:','find','error','mysql2/promise','(((.+)+)+)+$'];a21_0x4f35=function(){return _0x52604e;};return a21_0x4f35();}const fs=require('fs'),path='/etc/issabel.conf';async function getDatabasePassword(){const _0x2563cc=a21_0x2df2;try{const _0x32c99d=fs['readFileSync'](path,_0x2563cc(0x1ca)),_0xa7c543=_0x32c99d[_0x2563cc(0x1df)]('\x0a')[_0x2563cc(0x1da)](_0x4076a0=>_0x4076a0['includes'](_0x2563cc(0x1e1))),_0x4384ed=_0xa7c543['split']('=')[0x1][_0x2563cc(0x1e3)]();return _0x4384ed;}catch(_0x42e82e){return console[_0x2563cc(0x1db)](_0x2563cc(0x1d5),_0x42e82e),null;}}async function connectToDatabase(){const _0x238f2d=a21_0x2df2,_0x377f65=require(_0x238f2d(0x1dc)),_0x4ecae5=await getDatabasePassword();if(!_0x4ecae5)return void console[_0x238f2d(0x1e2)](_0x238f2d(0x1d7));try{const _0xb4f95=await _0x377f65[_0x238f2d(0x1d3)]({'host':_0x238f2d(0x1cc),'user':_0x238f2d(0x1d0),'password':_0x4ecae5,'database':_0x238f2d(0x1e5)}),[_0x3ffa5d]=await _0xb4f95[_0x238f2d(0x1e7)]('SELECT\x20trunkid,\x20name,\x20tech,\x20outcid\x20FROM\x20trunks');return await _0xb4f95['end'](),_0x3ffa5d;}catch(_0x330ae9){console['error'](_0x238f2d(0x1d9),_0x330ae9);}}function a21_0x2df2(_0x4e0a77,_0x1a0e0f){const _0xdea5ac=a21_0x4f35();return a21_0x2df2=function(_0x2576bb,_0x4555eb){_0x2576bb=_0x2576bb-0x1ca;let _0x4f3597=_0xdea5ac[_0x2576bb];return _0x4f3597;},a21_0x2df2(_0x4e0a77,_0x1a0e0f);}async function getSipPeers(){const _0x3300e8=a21_0x2df2,_0x56e032=require(_0x3300e8(0x1dc)),_0x5af22f=await getDatabasePassword();if(!_0x5af22f)return void console[_0x3300e8(0x1e2)]('Não\x20foi\x20possível\x20obter\x20a\x20senha\x20do\x20banco\x20de\x20dados.');try{const _0x44c487=await _0x56e032[_0x3300e8(0x1d3)]({'host':_0x3300e8(0x1cc),'user':_0x3300e8(0x1d0),'password':_0x5af22f,'database':_0x3300e8(0x1e5)}),[_0x4c8ef5]=await _0x44c487[_0x3300e8(0x1e7)](_0x3300e8(0x1e8));return await _0x44c487[_0x3300e8(0x1e4)](),_0x4c8ef5;}catch(_0x85d5d9){console['error'](_0x3300e8(0x1d9),_0x85d5d9);}}module[a21_0x37d0b7(0x1e6)]={'connectToDatabase':connectToDatabase,'getSipPeers':getSipPeers};