'use strict';const a28_0x35ff48=a28_0x1f47;(function(_0x4db0d7,_0x4792cf){const _0x1bdf8e=a28_0x1f47,_0xaffa71=_0x4db0d7();while(!![]){try{const _0x5b7353=parseInt(_0x1bdf8e(0x1e0))/0x1+parseInt(_0x1bdf8e(0x1f6))/0x2*(-parseInt(_0x1bdf8e(0x1d1))/0x3)+-parseInt(_0x1bdf8e(0x1cc))/0x4*(-parseInt(_0x1bdf8e(0x1d3))/0x5)+parseInt(_0x1bdf8e(0x1d0))/0x6*(parseInt(_0x1bdf8e(0x1f0))/0x7)+-parseInt(_0x1bdf8e(0x1d7))/0x8*(-parseInt(_0x1bdf8e(0x1fc))/0x9)+-parseInt(_0x1bdf8e(0x1f4))/0xa+-parseInt(_0x1bdf8e(0x1f7))/0xb*(-parseInt(_0x1bdf8e(0x1e3))/0xc);if(_0x5b7353===_0x4792cf)break;else _0xaffa71['push'](_0xaffa71['shift']());}catch(_0x4676fb){_0xaffa71['push'](_0xaffa71['shift']());}}}(a28_0x37d7,0x65d68));function a28_0x1f47(_0x39d921,_0x449c2b){const _0x5b93c5=a28_0x37d7();return a28_0x1f47=function(_0x11a06a,_0x26f749){_0x11a06a=_0x11a06a-0x1cc;let _0x37d750=_0x5b93c5[_0x11a06a];return _0x37d750;},a28_0x1f47(_0x39d921,_0x449c2b);}const axios=require('axios'),redis=require(a28_0x35ff48(0x1de)),schedule=require(a28_0x35ff48(0x1e7)),moment=require(a28_0x35ff48(0x1f2)),redisClient=redis['createClient']();redisClient['on']('error',_0x4ae365=>console[a28_0x35ff48(0x1e2)](a28_0x35ff48(0x1fb),_0x4ae365));async function connectRedis(){const _0x3c1791=a28_0x35ff48;redisClient[_0x3c1791(0x1f1)]||(await redisClient[_0x3c1791(0x1d2)](),console[_0x3c1791(0x1e4)](_0x3c1791(0x1e5)));}function getDateRange(){const _0x12adab=a28_0x35ff48,_0x2ec10e=moment()[_0x12adab(0x1d8)](_0x12adab(0x1d6)),_0xec09af=moment()[_0x12adab(0x1ec)](0x1e,_0x12adab(0x1e1))[_0x12adab(0x1d8)](_0x12adab(0x1d6));return{'dataInicial':_0xec09af,'dataFinal':_0x2ec10e};}async function fetchLeadmobData(){const _0x36b21f=a28_0x35ff48,_0x32ce8b={'username':process['env'][_0x36b21f(0x1d9)],'password':process[_0x36b21f(0x1fd)][_0x36b21f(0x1df)]},{dataInicial:_0x4ebca8,dataFinal:_0x3b1ee9}=getDateRange();try{const _0x463631=await axios[_0x36b21f(0x1d4)]('https://app.leadmob.com.br/tools/ai/dados',{'data_inicial':_0x4ebca8,'data_final':_0x3b1ee9},{'auth':_0x32ce8b,'headers':{'Content-Type':_0x36b21f(0x1dd)}});return _0x463631['data'];}catch(_0x3e420d){throw console[_0x36b21f(0x1e2)](_0x36b21f(0x1ff),_0x3e420d),_0x3e420d;}}async function cacheLeadmobData(){const _0x4ea1e8=a28_0x35ff48,_0x3bba25=(function(){let _0x5b5102=!![];return function(_0x4e7302,_0x149a06){const _0x711439=_0x5b5102?function(){const _0x5b061c=a28_0x1f47;if(_0x149a06){const _0xe23808=_0x149a06[_0x5b061c(0x1e9)](_0x4e7302,arguments);return _0x149a06=null,_0xe23808;}}:function(){};return _0x5b5102=![],_0x711439;};}()),_0x281ef8=_0x3bba25(this,function(){const _0x269dac=a28_0x1f47;return _0x281ef8[_0x269dac(0x1f9)]()[_0x269dac(0x1dc)](_0x269dac(0x1d5))[_0x269dac(0x1f9)]()[_0x269dac(0x1f8)](_0x281ef8)[_0x269dac(0x1dc)]('(((.+)+)+)+$');});_0x281ef8();try{await connectRedis();const _0x390874=await fetchLeadmobData(),_0x309321=new Map();Object['entries'](_0x390874)[_0x4ea1e8(0x1e6)](([_0x1b46f9,_0x252797,_0x57f5ab])=>{const _0x102626=_0x4ea1e8;_0x309321[_0x102626(0x1f5)](_0x252797[0x4][_0x102626(0x1fa)],_0x252797[0x4]);});const _0x1ef6d7=Object[_0x4ea1e8(0x1ed)](_0x309321);await redisClient[_0x4ea1e8(0x1f5)](_0x4ea1e8(0x1cd),JSON[_0x4ea1e8(0x1ee)](_0x1ef6d7)),console[_0x4ea1e8(0x1e4)](_0x4ea1e8(0x1ef));}catch(_0x5863ee){console[_0x4ea1e8(0x1e2)](_0x4ea1e8(0x1ce),_0x5863ee);}}async function getCachedLeadmobData(_0x512e47){const _0x5d6a06=a28_0x35ff48;try{await connectRedis();const _0x34d40d=await redisClient[_0x5d6a06(0x1f3)](_0x5d6a06(0x1cd)),_0x205e39=_0x34d40d?JSON[_0x5d6a06(0x1eb)](_0x34d40d):null,_0x3b27f2=_0x205e39?new Map(Object[_0x5d6a06(0x1db)](_0x205e39)):new Map();return _0x3b27f2['has'](_0x512e47)?(console[_0x5d6a06(0x1e4)](_0x5d6a06(0x1fe),_0x3b27f2[_0x5d6a06(0x1f3)](_0x512e47)),_0x3b27f2[_0x5d6a06(0x1f3)](_0x512e47)):(console[_0x5d6a06(0x1e4)](_0x5d6a06(0x1cf)),null);}catch(_0x4ba143){throw console[_0x5d6a06(0x1e2)](_0x5d6a06(0x1ea),_0x4ba143),_0x4ba143;}}schedule['scheduleJob']('0\x20*\x20*\x20*\x20*',()=>{const _0xcf8cf6=a28_0x35ff48;console['log'](_0xcf8cf6(0x1e8)),cacheLeadmobData();}),cacheLeadmobData(),module[a28_0x35ff48(0x1da)]={'getCachedLeadmobData':getCachedLeadmobData};function a28_0x37d7(){const _0x2df150=['days','error','852kJRpxA','log','Conectado\x20ao\x20Redis.','forEach','node-schedule','Atualizando\x20cache\x20da\x20Leadmob...','apply','Erro\x20ao\x20pegar\x20os\x20dados\x20do\x20Redis:','parse','subtract','fromEntries','stringify','Dados\x20da\x20Leadmob\x20armazenados\x20no\x20Redis\x20com\x20sucesso.','23366KHOCyL','isOpen','moment','get','114110TreuNd','set','2pAIsbq','8525kXLQdL','constructor','toString','telefone','Redis\x20error:','3297312EFJmkW','env','ENCONTREI','Erro\x20ao\x20consultar\x20Leadmob:','2612jhRouA','leadmob_data_map','Erro\x20ao\x20armazenar\x20os\x20dados\x20no\x20Redis:','Contato\x20n√£o\x20encontrado.','306PHIVQl','1413060VpXEDt','connect','680PhnAYp','post','(((.+)+)+)+$','YYYY-MM-DD','8LZEMqH','format','LEADMOB_USER','exports','entries','search','application/json','redis','LEADMOB_PASS','219120KIrIrV'];a28_0x37d7=function(){return _0x2df150;};return a28_0x37d7();}