"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initServer=initServer;var _routesPbx=_interopRequireDefault(require("./routes/routesPbx")),_http=require("http"),_ami=require("./ami/ami"),_agi=require("./agi/agi"),_cors=_interopRequireDefault(require("cors"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}const express=require("express");require("dotenv").config();async function initServer(){const a=express(),b=new _http.createServer(a);a.use((0,_cors.default)()),a.use(express.json()),a.use("/api/ipbx",_routesPbx.default),await(0,_ami.initAmi)(),await(0,_agi.initAgi)();const c=process.env.PORT_API||3e3;b.listen(c,()=>{console.log(`Server is running on port: ${c}`)})}